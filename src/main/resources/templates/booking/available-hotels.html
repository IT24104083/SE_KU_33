<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>

<div th:fragment="available-hotels">
    <h2>Check Available Hotels</h2>

    <form th:action="@{/}" method="get" class="row g-3 align-items-end mb-4 p-4 search-form">
        <div class="col-md-3">
            <label for="location" class="form-label">Location:</label>
            <input type="text" id="location" name="location" class="form-control"
                   th:value="${location}" placeholder="e.g., Kandy">
        </div>
        <div class="col-md-3">
            <label for="venueCost" class="form-label">Venue Cost:</label>
            <input type="number" id="venueCost" name="venueCost" class="form-control"
                   th:value="${venueCost}" placeholder="e.g., 5000">
        </div>
        <div class="col-md-3">
            <label for="capacity" class="form-label">Capacity:</label>
            <input type="number" id="capacity" name="capacity" class="form-control"
                   th:value="${capacity}" placeholder="e.g., 150">
        </div>
        <div class="col-md-3 d-flex gap-2">
            <button type="submit" class="btn btn-primary w-100"><i class="fas fa-search"></i> Search</button>
            <a th:href="@{/}" class="btn btn-secondary w-100"><i class="fas fa-times"></i> Clear</a>
        </div>
    </form>

    <!-- Alert message for no matching hotels -->
    <div class="alert alert-danger alert-dismissible fade show" role="alert" th:if="${noResultsFound}">
        <i class="fas fa-exclamation-triangle"></i>
        <strong>No matching hotels found!</strong> Please try different search criteria.
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>

    <h3 class="mt-5">Available Hotels</h3>
    <div class="table-container">
        <table class="table table-striped">
            <thead>
            <tr>
                <th>Hotel Name</th>
                <th>Location</th>
                <th>Venue Cost</th>
                <th>Capacity</th>
                <th>Action</th>
            </tr>
            </thead>
            <tbody>
            <tr th:if="${availableVenues.isEmpty()}">
                <td colspan="5" class="text-center p-4">No hotels found matching your criteria.</td>
            </tr>
            <tr th:each="venue : ${availableVenues}">
                <td th:text="${venue.name}">Hotel Name</td>
                <td th:text="${venue.location}">Location</td>
                <td th:text="'$' + ${#numbers.formatDecimal(venue.venueCost, 1, 'COMMA', 2, 'POINT')}">5000.00</td>
                <td th:text="${venue.capacity}">200</td>
                <td><a href="#" class="btn btn-primary btn-sm">Book Now</a></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>

</body>
</html>